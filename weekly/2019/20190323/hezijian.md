# 20190323

本周 写的代码并不是很多，周四 肖老板给个项目提了需求后，就根据需求做了部分修改，但改动量并不算很大。之后把一些前端页面 简单的完成了一下。前端真不是我的强项。。。 到周六 已经算是写完，就差部署，部署决定使用 Docker，为以后的新OJ的部署开路。（代码已丢Github [links](https://github.com/SDIBTACM/TrainingRank)

还与肖老师讨论了 新OJ的一点东西，肖老师认为数据库不要改动。但我在开始构思数据库的时候将一部分全局配置文件放在了数据库中，将一些不合理的表结构做了拆分，例如TEXT等，以降低性能损耗。 霞姐的解决方案更狠， 超过2K直接小文件。阿里好歹还是 超过5K拆字段。然后将命名规范化。。

关于 JudgeTaskManage 的部分，下周会接着写。觉得时间太紧迫，与 Worker 和 Web 端的交互直接使用 HTTP/1.1(要什么自行车)。通过 Redis 进行状态缓存。

关于 Worker 的部分， 我不太想让一个任务多线程跑。就一个 goroutine 负责 不断启动沙箱进行编译， 运行， 判题{常规，SPJ}；然后定时 向JudgingTaskManage 提交系统状态：譬如正在运行的任务数量，系统资源消耗情况等。

Redis会用于全部的Cache。这样的话集群内的WebServer和JudgingTaskManage都可以交换数据。MySQL则用于持久化储存。 
Laravel 推荐使用 Memcached 用于Session的存储。但为了不引入过多的东西，就不选用了。

晚上想了一下，决定找运维的工作。。虽然开发也接触不少，但看看自己的书架，大部分跟运维相关（Shell，分布式，大型网站，etc）， 看来自己还是比较喜欢这一方面， 等整理一份简历，求dalao们内推啊～～


共勉~~